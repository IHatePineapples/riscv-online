<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RISC-V Online: RISC-V Online</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="full_logo_200x100.png"/></td>
  <td id="projectalign">
   <div id="projectname">RISC-V Online<span id="projectnumber">&#160;1.0.1</span>
   </div>
   <div id="projectbrief">RISC-V Web assembly interpreter in C++, that runs on the Raspberry Pi Pico W</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">RISC-V Online </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a><img src="https://github.com/IHatePineapples/riscv-online/actions/workflows/cmake-RP2040-ARM-Release.yml/badge.svg" alt="1" style="pointer-events: none;" class="inline"/> <img src="https://github.com/IHatePineapples/riscv-online/actions/workflows/cmake-ubuntu-x86_64-Release.yml/badge.svg" alt="2" style="pointer-events: none;" class="inline"/> <img src="https://github.com/IHatePineapples/riscv-online/actions/workflows/codeql.yml/badge.svg" alt="3" style="pointer-events: none;" class="inline"/> <img src="https://github.com/IHatePineapples/riscv-online/actions/workflows/devskim.yml/badge.svg" alt="4" style="pointer-events: none;" class="inline"/> <img src="https://github.com/IHatePineapples/riscv-online/actions/workflows/doxygen.yml/badge.svg" alt="5" style="pointer-events: none;" class="inline"/></p>
<div style="text-align: center"> <img src="https://repository-images.githubusercontent.com/740292996/fc09680a-050d-4285-9090-8d38a7002559" alt="" width="30%" class="inline"/> </div><p>RISC-V Assembly Web Interpreter written in C++ for the Raspberry Pi Pico W.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Building from source</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Requirements</h2>
<ul>
<li>CMake</li>
<li>Make</li>
<li>GCC/G++ or equivalent (supports c++17)</li>
<li>Raspberry Pi Pico W</li>
<li>Boost (Header-only)</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Configure:</h2>
<div class="fragment"><div class="line">cmake -G Ninja .</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Build:</h2>
<div class="fragment"><div class="line">ninja</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
Testing:</h2>
<div class="fragment"><div class="line">cd src/test</div>
<div class="line">cmake .</div>
<div class="line">make</div>
<div class="line">make test</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md6"></a>
How to use:</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
Setup Wi-Fi</h2>
<p>The board will try to connect by default to an open Wi-Fi named "RISC-V Online". This can be best setup using a phone's network tethering ability, such as on Android. Create this Wi-Fi network, name it "RISC-V Online" and make it open.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Flashing</h2>
<p>There should now be a <code>*.uf2</code> file located in you binary tree : <code>src/*.uf2</code></p>
<p>After locating it, plug in the MCU while holding the button on board, drag and drop that file.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Access web UI</h2>
<p>You now need to find the IP address of the board, which is best done just checking the list of connection in your AP. If using android tethering, this should be in your settings next to the AP settings.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Syntax</h2>
<p>The builtin web interface support very basic assembly parsing:</p>
<div class="fragment"><div class="line">lui x5, 2</div>
<div class="line">add x5, 1</div>
<div class="line">jal x0, -32 <span class="comment"># Repeat add forever</span></div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md11"></a>
load/store</h2>
<p>Loading storing from memory is supported. To allocate stack memory, you would usually use <code>.data</code> directives in assembly language. To achieve zeroed memory regions, you have to leave some lines empty, to act as padding.</p>
<div class="fragment"><div class="line">lui x1, 0x2</div>
<div class="line">sw x1, 0(x0)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
Direct web-API access</h2>
<p>RISC-V Online has two API endpoints:</p>
<div class="fragment"><div class="line">POST /submit</div>
<div class="line">POST /return</div>
</div><!-- fragment --><p> To submit an emulation state/job, the payload would look like this:</p>
<div class="fragment"><div class="line">id=26&amp;ram=0|cs7|&amp;ra=0&amp;sp=0&amp;gp=0&amp;tp=cn4&amp;t0=0&amp;t1=0&amp;t2=0&amp;fp=0&amp;s1=0&amp;a0=0&amp;a1=0&amp;a2=0&amp;a3=0&amp;a4=0&amp;a5=0&amp;a6=0&amp;a7=0&amp;s2=0&amp;s3=0&amp;s4=0&amp;s5=0&amp;s6=0&amp;s7=0&amp;s8=0&amp;s9=0&amp;s10=0&amp;s11=0&amp;t3=0&amp;t4=0&amp;t5=0&amp;t6=0&amp;pc=w&amp;prog=0&amp;</div>
</div><!-- fragment --><p>We send the register states, a random ID and program encoded in the ram.</p>
<p>To encode the RAM, you need to encode each 32-bit memory regions as an integer, then, represented base 36. Each of these memory regions will be suffixed by the <code>|</code> delimiter. Concatenating all of these, and sending them within the <code>ram</code> parameter/field via POST. Everything should be sent to <code>/submit</code>.</p>
<p>To retrieve back the result, just <code>POST</code> the original ID</p>
<div class="fragment"><div class="line">id=26</div>
</div><!-- fragment --><p> to <code>/return</code>.</p>
<p>This will return a JSON object with all the original fields updated. On error, from submit or during execution, this will return an empty object, <code>{ }</code>.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
TODO:</h1>
<ul>
<li>Fix GitHub workflows, Ubuntu doesn't automatically pick up latest compiler, need to download it from ARM website. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Feb 18 2025 20:58:51 for RISC-V Online by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
